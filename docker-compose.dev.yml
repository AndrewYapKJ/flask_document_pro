version: '3.8'

services:
  flask_app:
    build:
      context: .
      dockerfile: Dockerfile.production
    container_name: flask_document_pro_dev
    ports:
      - "5000:5000"
    volumes:
      # Mount source code for live reload
      - ./apps:/app/apps
      - ./run.py:/app/run.py
      - ./apps/static/uploads:/app/apps/static/uploads
    environment:
      - FLASK_APP=run.py
      - FLASK_DEBUG=1
      - DEBUG=True
      - DATABASE_URL=${DATABASE_URL}
      - SECRET_KEY=${SECRET_KEY}
      - MASTER_API_KEY=${MASTER_API_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    env_file:
      - .env
    command: python run.py
    restart: unless-stopped
